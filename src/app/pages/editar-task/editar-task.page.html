<ion-header>
  <ion-toolbar>
    <ion-title>Editar Tarea</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <form (ngSubmit)="onSubmit()">
    <!-- Título de la tarea -->
    <ion-item>
      <ion-label position="floating">Título</ion-label>
      <ion-input 
        type="text" 
        [(ngModel)]="task.title" 
        name="title" 
        required>
      </ion-input>
    </ion-item>

    <!-- Descripción de la tarea -->
    <ion-item>
      <ion-label position="floating">Descripción</ion-label>
      <ion-input 
        type="text" 
        [(ngModel)]="task.description" 
        name="description" 
        required>
      </ion-input>
    </ion-item>

    <!-- Ubicación de la tarea -->
    <ion-item *ngIf="task.location">
      <ion-label position="floating">Ubicación</ion-label>
      <ion-input 
        type="text" 
        [(ngModel)]="task.location.lat" 
        name="locationLat" 
        placeholder="Latitud" 
        required>
      </ion-input>
      <ion-input 
        type="text" 
        [(ngModel)]="task.location.lng" 
        name="locationLng" 
        placeholder="Longitud" 
        required>
      </ion-input>
    </ion-item>

    <!-- Foto de la tarea -->
    <ion-item>
      <ion-label>Foto</ion-label>

      <!-- Botón para tomar una foto -->
      <ion-button color="secondary" (click)="takePhoto()">
        <ion-icon slot="start" name="camera"></ion-icon> Tomar Foto
      </ion-button>
    </ion-item>

    <!-- Previsualización de la foto seleccionada o tomada -->
    <div *ngIf="task.photo">
      <img [src]="task.photo" alt="Foto de la tarea" style="width: 100%; max-width: 200px;">
    </div>

    <!-- Botón para guardar cambios -->
    <ion-button expand="full" type="submit" [disabled]="!task.title || !task.description">
      Guardar Cambios
    </ion-button>
    
    <!-- Botón para cancelar y regresar a la vista anterior -->
    <ion-button expand="full" color="danger" (click)="onCancel()">
      Cancelar
    </ion-button>

  </form>
</ion-content>


